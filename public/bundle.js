(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

var _messageList = _interopRequireDefault(require("./messageList"));

var _messageForm = _interopRequireDefault(require("./messageForm"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_messageList.default.chatify();

_messageForm.default.createAndAppendForm();

},{"./messageForm":5,"./messageList":6}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _messageCollection = _interopRequireDefault(require("./messageCollection"));

var _messageList = _interopRequireDefault(require("./messageList"));

var _messageEditForm = _interopRequireDefault(require("./messageEditForm"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const message = {
  messageBuilder(messageObject) {
    let messageArticle = document.createElement("article");
    messageArticle.setAttribute("id", `message--${messageObject.id}`);
    messageArticle.setAttribute("class", "messageArticle");
    let messageName = document.createElement("h3");
    messageName.textContent = messageObject.SenderName;
    let messageContent = document.createElement("p");
    messageContent.textContent = messageObject.Message;
    let date = document.createElement("p");
    date.textContent = messageObject.Date;
    let editMessageButton = document.createElement("button");
    editMessageButton.textContent = "Edit";
    editMessageButton.addEventListener("click", () => {
      let articleId = event.target.parentNode.id;
      let messageId = articleId.split("--")[1];

      _messageCollection.default.getMessage(messageId).then(response => {
        _messageEditForm.default.createAndAppendForm(articleId, response);
      });
    });
    let deleteMessageButton = document.createElement("button");
    deleteMessageButton.textContent = "Delete";
    deleteMessageButton.addEventListener("click", () => {
      let messageId = event.target.parentNode.id.split("--")[1];

      _messageCollection.default.deleteMessage(messageId).then(response => {
        _messageList.default.chatify();
      });
    });
    let horizontalRule = document.createElement("hr");
    messageArticle.appendChild(messageName);
    messageArticle.appendChild(messageContent);
    messageArticle.appendChild(date);
    messageArticle.appendChild(editMessageButton);
    messageArticle.appendChild(deleteMessageButton);
    messageArticle.appendChild(horizontalRule);
    return messageArticle;
  }

};
var _default = message;
exports.default = _default;

},{"./messageCollection":3,"./messageEditForm":4,"./messageList":6}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
const messageCollection = {
  getAllmessages() {
    return fetch("http://localhost:8088/Messages").then(response => response.json());
  },

  postNewMessage(newMessageToSave) {
    return fetch("http://localhost:8088/Messages", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(newMessageToSave)
    });
  },

  deleteMessage(messageId) {
    return fetch(`http://localhost:8088/Messages/${messageId}`, {
      method: "DELETE",
      headers: {
        "Content-Type": "application/json"
      }
    });
  },

  getMessage(messageId) {
    return fetch(`http://localhost:8088/Messages/${messageId}`).then(response => response.json());
  },

  putExistingMessage(messageId, messageToEdit) {
    return fetch(`http://localhost:8088/Messages/${messageId}`, {
      method: "PUT",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(messageToEdit)
    });
  }

};
var _default = messageCollection;
exports.default = _default;

},{}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _messageCollection = _interopRequireDefault(require("./messageCollection"));

var _messageList = _interopRequireDefault(require("./messageList"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const messageEditForm = {
  createAndAppendForm(articleId, messageObjToEdit) {
    let messageNameField = document.createElement("p");
    let messageNameLabel = document.createElement("label");
    messageNameLabel.textContent = "Sender  ";
    let messageNameInput = document.createElement("input");
    messageNameInput.value = messageObjToEdit.SenderName;
    messageNameField.appendChild(messageNameLabel);
    messageNameField.appendChild(messageNameInput);
    let messageInputField = document.createElement("p");
    let messageInputLabel = document.createElement("label");
    messageInputLabel.textContent = "Edit Message  ";
    let messageContentInput = document.createElement("textarea");
    messageContentInput.value = messageObjToEdit.Message;
    messageInputField.appendChild(messageInputLabel);
    messageInputField.appendChild(messageContentInput);
    let dateField = document.createElement("p");
    let dateLabel = document.createElement("label");
    dateLabel.textContent = "Date  ";
    let dateInput = document.createElement("input");
    dateInput.value = messageObjToEdit.Date;
    dateField.appendChild(dateLabel);
    dateField.appendChild(dateInput);
    let updateButton = document.createElement("button");
    updateButton.textContent = "Update";
    updateButton.addEventListener("click", () => {
      let editedMessage = {
        SenderName: messageNameInput.value,
        Message: messageContentInput.value,
        Date: dateInput.value
      };

      _messageCollection.default.putExistingMessage(messageObjToEdit.id, editedMessage).then(response => {
        _messageList.default.chatify();
      });
    });
    let messageItemArticle = document.querySelector(`#${articleId}`);

    while (messageItemArticle.firstChild) {
      messageItemArticle.removeChild(messageItemArticle.firstChild);
    }

    messageItemArticle.appendChild(messageNameField);
    messageItemArticle.appendChild(messageInputField);
    messageItemArticle.appendChild(dateField);
    messageItemArticle.appendChild(updateButton);
  }

};
var _default = messageEditForm;
exports.default = _default;

},{"./messageCollection":3,"./messageList":6}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _messageCollection = _interopRequireDefault(require("./messageCollection"));

var _messageList = _interopRequireDefault(require("./messageList"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const messageForm = {
  createAndAppendForm() {
    function getTimeStamp() {
      var now = new Date();
      return now.getMonth() + 1 + '/' + now.getDate() + '/' + now.getFullYear() + " " + now.getHours() + ':' + (now.getMinutes() < 10 ? "0" + now.getMinutes() : now.getMinutes()) + ':' + (now.getSeconds() < 10 ? "0" + now.getSeconds() : now.getSeconds());
    }

    let formHeader = document.createElement("h2");
    formHeader.textContent = "   Welcome To Chat Box";
    let messageNameField = document.createElement("fieldset");
    let messageNameLabel = document.createElement("label");
    messageNameLabel.textContent = "Sender's Name ";
    messageNameLabel.setAttribute("for", "message__name");
    let messageNameInput = document.createElement("input");
    messageNameInput.setAttribute("id", "message__name");
    messageNameInput.setAttribute("name", "message__name");
    messageNameField.appendChild(messageNameLabel);
    messageNameField.appendChild(messageNameInput);
    let messageInputField = document.createElement("fieldset");
    let messageInputLabel = document.createElement("label");
    messageInputLabel.textContent = "Your Message ";
    messageInputLabel.setAttribute("for", "message__content");
    let messageInputBox = document.createElement("textarea");
    messageInputBox.setAttribute("id", "message__content");
    messageInputBox.setAttribute("name", "message__content");
    messageInputField.appendChild(messageInputLabel);
    messageInputField.appendChild(messageInputBox);
    let messageDateField = document.createElement("fieldset");
    let messageDateLabel = document.createElement("label");
    messageDateLabel.textContent = "Date ";
    messageDateLabel.setAttribute("for", "message__date");
    let messageDateInput = document.createElement("input");
    messageDateInput.setAttribute("id", "date__input");
    messageDateInput.setAttribute("name", "date__input");
    messageDateField.appendChild(messageDateLabel);
    messageDateField.appendChild(messageDateInput);
    let submitButton = document.createElement("button");
    submitButton.textContent = "Send";
    submitButton.setAttribute("class", "message__send");
    submitButton.addEventListener("click", this.handleAddNewMessage);
    let messageFormFragment = document.createDocumentFragment();
    messageFormFragment.appendChild(formHeader);
    messageFormFragment.appendChild(messageNameField);
    messageFormFragment.appendChild(messageInputField);
    messageFormFragment.appendChild(messageDateField);
    messageFormFragment.appendChild(submitButton);
    let formArticle = document.querySelector(".formMessages");
    formArticle.appendChild(messageFormFragment);
  },

  handleAddNewMessage(event) {
    let inputMessageName = document.querySelector("#message__name").value;
    let inputMessageContent = document.querySelector("#message__content").value;
    let inputMessageDate = document.querySelector("#date__input").value;
    let newMessage = {
      SenderName: inputMessageName,
      Message: inputMessageContent,
      Date: inputMessageDate
    };

    _messageCollection.default.postNewMessage(newMessage); // .then(reponse => {


    _messageList.default.chatify(); // })

  }

};
var _default = messageForm;
exports.default = _default;

},{"./messageCollection":3,"./messageList":6}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _messageCollection = _interopRequireDefault(require("./messageCollection"));

var _message = _interopRequireDefault(require("./message"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const messageList = {
  chatify() {
    _messageCollection.default.getAllmessages().then(allMessages => {
      let messageDocFragment = document.createDocumentFragment();
      allMessages.forEach(chat => {
        let messageHtml = _message.default.messageBuilder(chat);

        messageDocFragment.appendChild(messageHtml);
      });
      let displayArticle = document.querySelector(".displayMessages");

      while (displayArticle.firstChild) {
        displayArticle.removeChild(displayArticle.firstChild);
      }

      displayArticle.appendChild(messageDocFragment);
    });
  }

};
var _default = messageList;
exports.default = _default;

},{"./message":2,"./messageCollection":3}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi9zY3JpcHRzL21haW4uanMiLCIuLi9zY3JpcHRzL21lc3NhZ2UuanMiLCIuLi9zY3JpcHRzL21lc3NhZ2VDb2xsZWN0aW9uLmpzIiwiLi4vc2NyaXB0cy9tZXNzYWdlRWRpdEZvcm0uanMiLCIuLi9zY3JpcHRzL21lc3NhZ2VGb3JtLmpzIiwiLi4vc2NyaXB0cy9tZXNzYWdlTGlzdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUE7O0FBQ0E7Ozs7QUFFQSxxQkFBWSxPQUFaOztBQUNBLHFCQUFZLG1CQUFaOzs7Ozs7Ozs7O0FDSkE7O0FBQ0E7O0FBQ0E7Ozs7QUFDQSxNQUFNLE9BQU8sR0FBRztBQUVmLEVBQUEsY0FBYyxDQUFDLGFBQUQsRUFBZ0I7QUFDM0IsUUFBSSxjQUFjLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsU0FBdkIsQ0FBckI7QUFFQSxJQUFBLGNBQWMsQ0FBQyxZQUFmLENBQTRCLElBQTVCLEVBQW1DLFlBQVcsYUFBYSxDQUFDLEVBQUcsRUFBL0Q7QUFDQSxJQUFBLGNBQWMsQ0FBQyxZQUFmLENBQTRCLE9BQTVCLEVBQXFDLGdCQUFyQztBQUVBLFFBQUksV0FBVyxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLElBQXZCLENBQWxCO0FBQ0EsSUFBQSxXQUFXLENBQUMsV0FBWixHQUEwQixhQUFhLENBQUMsVUFBeEM7QUFFQSxRQUFJLGNBQWMsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixHQUF2QixDQUFyQjtBQUNBLElBQUEsY0FBYyxDQUFDLFdBQWYsR0FBNkIsYUFBYSxDQUFDLE9BQTNDO0FBRUEsUUFBSSxJQUFJLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsR0FBdkIsQ0FBWDtBQUNBLElBQUEsSUFBSSxDQUFDLFdBQUwsR0FBbUIsYUFBYSxDQUFDLElBQWpDO0FBR0EsUUFBSSxpQkFBaUIsR0FBRyxRQUFRLENBQUMsYUFBVCxD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b250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgbWVzc2FnZUxpc3QgZnJvbSBcIi4vbWVzc2FnZUxpc3RcIlxyXG5pbXBvcnQgbWVzc2FnZUZvcm0gZnJvbSBcIi4vbWVzc2FnZUZvcm1cIlxyXG5cclxubWVzc2FnZUxpc3QuY2hhdGlmeSgpXHJcbm1lc3NhZ2VGb3JtLmNyZWF0ZUFuZEFwcGVuZEZvcm0oKSIsImltcG9ydCBtZXNzYWdlQ29sbGVjdGlvbiBmcm9tIFwiLi9tZXNzYWdlQ29sbGVjdGlvblwiXHJcbmltcG9ydCBtZXNzYWdlTGlzdCBmcm9tIFwiLi9tZXNzYWdlTGlzdFwiXHJcbmltcG9ydCBtZXNzYWdlRWRpdEZvcm0gZnJvbSBcIi4vbWVzc2FnZUVkaXRGb3JtXCJcclxuY29uc3QgbWVzc2FnZSA9IHtcclxuICBcclxuIG1lc3NhZ2VCdWlsZGVyKG1lc3NhZ2VPYmplY3QpIHtcclxuICAgIGxldCBtZXNzYWdlQXJ0aWNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhcnRpY2xlXCIpXHJcbiAgICBcclxuICAgIG1lc3NhZ2VBcnRpY2xlLnNldEF0dHJpYnV0ZShcImlkXCIsIGBtZXNzYWdlLS0ke21lc3NhZ2VPYmplY3QuaWR9YClcclxuICAgIG1lc3NhZ2VBcnRpY2xlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwibWVzc2FnZUFydGljbGVcIilcclxuICAgIFxyXG4gICAgbGV0IG1lc3NhZ2VOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpXHJcbiAgICBtZXNzYWdlTmFtZS50ZXh0Q29udGVudCA9IG1lc3NhZ2VPYmplY3QuU2VuZGVyTmFtZVxyXG5cclxuICAgIGxldCBtZXNzYWdlQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXHJcbiAgICBtZXNzYWdlQ29udGVudC50ZXh0Q29udGVudCA9IG1lc3NhZ2VPYmplY3QuTWVzc2FnZVxyXG5cclxuICAgIGxldCBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIilcclxuICAgIGRhdGUudGV4dENvbnRlbnQgPSBtZXNzYWdlT2JqZWN0LkRhdGVcclxuXHJcbiAgICBcclxuICAgIGxldCBlZGl0TWVzc2FnZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIilcclxuICAgIGVkaXRNZXNzYWdlQnV0dG9uLnRleHRDb250ZW50ID0gXCJFZGl0XCJcclxuICAgIGVkaXRNZXNzYWdlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGxldCBhcnRpY2xlSWQgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZS5pZFxyXG4gICAgICBsZXQgbWVzc2FnZUlkID0gYXJ0aWNsZUlkLnNwbGl0KFwiLS1cIilbMV1cclxuICAgICAgbWVzc2FnZUNvbGxlY3Rpb24uZ2V0TWVzc2FnZShtZXNzYWdlSWQpXHJcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICBtZXNzYWdlRWRpdEZvcm0uY3JlYXRlQW5kQXBwZW5kRm9ybShhcnRpY2xlSWQsIHJlc3BvbnNlKVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuXHJcbiAgICBcclxuICAgIGxldCBkZWxldGVNZXNzYWdlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKVxyXG4gICAgZGVsZXRlTWVzc2FnZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRGVsZXRlXCJcclxuICAgIGRlbGV0ZU1lc3NhZ2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgbGV0IG1lc3NhZ2VJZCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLmlkLnNwbGl0KFwiLS1cIilbMV1cclxuICAgICAgbWVzc2FnZUNvbGxlY3Rpb24uZGVsZXRlTWVzc2FnZShtZXNzYWdlSWQpXHJcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICBtZXNzYWdlTGlzdC5jaGF0aWZ5KClcclxuICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgbGV0IGhvcml6b250YWxSdWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImhyXCIpXHJcblxyXG4gICAgbWVzc2FnZUFydGljbGUuYXBwZW5kQ2hpbGQobWVzc2FnZU5hbWUpXHJcbiAgICBtZXNzYWdlQXJ0aWNsZS5hcHBlbmRDaGlsZChtZXNzYWdlQ29udGVudClcclxuICAgIG1lc3NhZ2VBcnRpY2xlLmFwcGVuZENoaWxkKGRhdGUpXHJcbiAgICBtZXNzYWdlQXJ0aWNsZS5hcHBlbmRDaGlsZChlZGl0TWVzc2FnZUJ1dHRvbilcclxuICAgIG1lc3NhZ2VBcnRpY2xlLmFwcGVuZENoaWxkKGRlbGV0ZU1lc3NhZ2VCdXR0b24pXHJcbiAgICBtZXNzYWdlQXJ0aWNsZS5hcHBlbmRDaGlsZChob3Jpem9udGFsUnVsZSlcclxuXHJcbiAgICByZXR1cm4gbWVzc2FnZUFydGljbGVcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG1lc3NhZ2UiLCJjb25zdCBtZXNzYWdlQ29sbGVjdGlvbiA9IHtcclxuXHJcbiAgZ2V0QWxsbWVzc2FnZXMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goXCJodHRwOi8vbG9jYWxob3N0OjgwODgvTWVzc2FnZXNcIilcclxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gIH0sXHJcblxyXG4gIHBvc3ROZXdNZXNzYWdlKG5ld01lc3NhZ2VUb1NhdmUpIHtcclxuICAgIFxyXG4gICAgcmV0dXJuIGZldGNoKFwiaHR0cDovL2xvY2FsaG9zdDo4MDg4L01lc3NhZ2VzXCIsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG5ld01lc3NhZ2VUb1NhdmUpXHJcbiAgICB9KVxyXG4gIH0sXHJcbiAgXHJcbiAgZGVsZXRlTWVzc2FnZShtZXNzYWdlSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgaHR0cDovL2xvY2FsaG9zdDo4MDg4L01lc3NhZ2VzLyR7bWVzc2FnZUlkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9LFxyXG4gIFxyXG4gIGdldE1lc3NhZ2UobWVzc2FnZUlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9NZXNzYWdlcy8ke21lc3NhZ2VJZH1gKVxyXG4gICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgfSxcclxuICBwdXRFeGlzdGluZ01lc3NhZ2UobWVzc2FnZUlkLCBtZXNzYWdlVG9FZGl0KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9NZXNzYWdlcy8ke21lc3NhZ2VJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2VUb0VkaXQpXHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgbWVzc2FnZUNvbGxlY3Rpb24iLCJpbXBvcnQgbWVzc2FnZUNvbGxlY3Rpb24gZnJvbSBcIi4vbWVzc2FnZUNvbGxlY3Rpb25cIlxyXG5pbXBvcnQgbWVzc2FnZUxpc3QgZnJvbSBcIi4vbWVzc2FnZUxpc3RcIlxyXG5cclxuY29uc3QgbWVzc2FnZUVkaXRGb3JtID0ge1xyXG4gIFxyXG4gIGNyZWF0ZUFuZEFwcGVuZEZvcm0gKGFydGljbGVJZCwgbWVzc2FnZU9ialRvRWRpdCkge1xyXG5cclxuICAgIFxyXG4gICAgbGV0IG1lc3NhZ2VOYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKVxyXG5cclxuICAgIGxldCBtZXNzYWdlTmFtZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpXHJcbiAgICBtZXNzYWdlTmFtZUxhYmVsLnRleHRDb250ZW50ID0gXCJTZW5kZXIgIFwiXHJcbiAgICBsZXQgbWVzc2FnZU5hbWVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKVxyXG4gICAgbWVzc2FnZU5hbWVJbnB1dC52YWx1ZSA9IG1lc3NhZ2VPYmpUb0VkaXQuU2VuZGVyTmFtZVxyXG5cclxuICAgIG1lc3NhZ2VOYW1lRmllbGQuYXBwZW5kQ2hpbGQobWVzc2FnZU5hbWVMYWJlbClcclxuICAgIG1lc3NhZ2VOYW1lRmllbGQuYXBwZW5kQ2hpbGQobWVzc2FnZU5hbWVJbnB1dClcclxuXHJcbiAgICBsZXQgbWVzc2FnZUlucHV0RmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKVxyXG5cclxuICAgIGxldCBtZXNzYWdlSW5wdXRMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKVxyXG4gICAgbWVzc2FnZUlucHV0TGFiZWwudGV4dENvbnRlbnQgPSBcIkVkaXQgTWVzc2FnZSAgXCJcclxuICAgIGxldCBtZXNzYWdlQ29udGVudElucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpXHJcbiAgICBtZXNzYWdlQ29udGVudElucHV0LnZhbHVlID0gbWVzc2FnZU9ialRvRWRpdC5NZXNzYWdlXHJcblxyXG4gICAgbWVzc2FnZUlucHV0RmllbGQuYXBwZW5kQ2hpbGQobWVzc2FnZUlucHV0TGFiZWwpXHJcbiAgICBtZXNzYWdlSW5wdXRGaWVsZC5hcHBlbmRDaGlsZChtZXNzYWdlQ29udGVudElucHV0KVxyXG5cclxuICAgIGxldCBkYXRlRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKVxyXG5cclxuICAgIGxldCBkYXRlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIilcclxuICAgIGRhdGVMYWJlbC50ZXh0Q29udGVudCA9IFwiRGF0ZSAgXCJcclxuICAgIGxldCBkYXRlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIilcclxuICAgIGRhdGVJbnB1dC52YWx1ZSA9IG1lc3NhZ2VPYmpUb0VkaXQuRGF0ZVxyXG5cclxuICAgIGRhdGVGaWVsZC5hcHBlbmRDaGlsZChkYXRlTGFiZWwpXHJcbiAgICBkYXRlRmllbGQuYXBwZW5kQ2hpbGQoZGF0ZUlucHV0KVxyXG5cclxuICAgIGxldCB1cGRhdGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpXHJcbiAgICB1cGRhdGVCdXR0b24udGV4dENvbnRlbnQgPSBcIlVwZGF0ZVwiXHJcblxyXG4gICAgXHJcbiAgICB1cGRhdGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgbGV0IGVkaXRlZE1lc3NhZ2UgPSB7XHJcbiAgICAgICAgU2VuZGVyTmFtZTogbWVzc2FnZU5hbWVJbnB1dC52YWx1ZSxcclxuICAgICAgICBNZXNzYWdlOiBtZXNzYWdlQ29udGVudElucHV0LnZhbHVlLFxyXG4gICAgICAgIERhdGU6IGRhdGVJbnB1dC52YWx1ZVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBtZXNzYWdlQ29sbGVjdGlvbi5wdXRFeGlzdGluZ01lc3NhZ2UobWVzc2FnZU9ialRvRWRpdC5pZCwgZWRpdGVkTWVzc2FnZSlcclxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgIG1lc3NhZ2VMaXN0LmNoYXRpZnkoKVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuXHJcbiAgICBcclxuICAgIGxldCBtZXNzYWdlSXRlbUFydGljbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHthcnRpY2xlSWR9YClcclxuXHJcbiAgICBcclxuICAgIHdoaWxlIChtZXNzYWdlSXRlbUFydGljbGUuZmlyc3RDaGlsZCkge1xyXG4gICAgICBtZXNzYWdlSXRlbUFydGljbGUucmVtb3ZlQ2hpbGQobWVzc2FnZUl0ZW1BcnRpY2xlLmZpcnN0Q2hpbGQpO1xyXG4gICAgfVxyXG4gICAgbWVzc2FnZUl0ZW1BcnRpY2xlLmFwcGVuZENoaWxkKG1lc3NhZ2VOYW1lRmllbGQpXHJcbiAgICBtZXNzYWdlSXRlbUFydGljbGUuYXBwZW5kQ2hpbGQobWVzc2FnZUlucHV0RmllbGQpXHJcbiAgICBtZXNzYWdlSXRlbUFydGljbGUuYXBwZW5kQ2hpbGQoZGF0ZUZpZWxkKVxyXG4gICAgbWVzc2FnZUl0ZW1BcnRpY2xlLmFwcGVuZENoaWxkKHVwZGF0ZUJ1dHRvbilcclxuICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgbWVzc2FnZUVkaXRGb3JtIiwiaW1wb3J0IG1lc3NhZ2VDb2xsZWN0aW9uIGZyb20gXCIuL21lc3NhZ2VDb2xsZWN0aW9uXCJcclxuaW1wb3J0IG1lc3NhZ2VMaXN0IGZyb20gXCIuL21lc3NhZ2VMaXN0XCJcclxuY29uc3QgbWVzc2FnZUZvcm0gPSB7XHJcbiAgY3JlYXRlQW5kQXBwZW5kRm9ybSgpIHtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRUaW1lU3RhbXAoKSB7XHJcbiAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICByZXR1cm4gKChub3cuZ2V0TW9udGgoKSArIDEpICsgJy8nICtcclxuICAgICAgICAgICAgICAobm93LmdldERhdGUoKSkgKyAnLycgK1xyXG4gICAgICAgICAgICAgICBub3cuZ2V0RnVsbFllYXIoKSArIFwiIFwiICtcclxuICAgICAgICAgICAgICAgbm93LmdldEhvdXJzKCkgKyAnOicgK1xyXG4gICAgICAgICAgICAgICAoKG5vdy5nZXRNaW51dGVzKCkgPCAxMClcclxuICAgICAgICAgICAgICAgICAgID8gKFwiMFwiICsgbm93LmdldE1pbnV0ZXMoKSlcclxuICAgICAgICAgICAgICAgICAgIDogKG5vdy5nZXRNaW51dGVzKCkpKSArICc6JyArXHJcbiAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgKChub3cuZ2V0U2Vjb25kcygpIDwgMTApXHJcbiAgICAgICAgICAgICAgICAgICA/IChcIjBcIiArIG5vdy5nZXRTZWNvbmRzKCkpXHJcbiAgICAgICAgICAgICAgICAgICA6IChub3cuZ2V0U2Vjb25kcygpKSkpO1xyXG4gIH1cclxuXHJcbiAgICBsZXQgZm9ybUhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKVxyXG4gICAgZm9ybUhlYWRlci50ZXh0Q29udGVudCA9IFwiICAgV2VsY29tZSBUbyBDaGF0IEJveFwiXHJcblxyXG5cclxuICAgIGxldCBtZXNzYWdlTmFtZUZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZpZWxkc2V0XCIpXHJcbiAgICBsZXQgbWVzc2FnZU5hbWVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKVxyXG4gICAgbWVzc2FnZU5hbWVMYWJlbC50ZXh0Q29udGVudCA9IFwiU2VuZGVyJ3MgTmFtZSBcIlxyXG4gICAgbWVzc2FnZU5hbWVMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJtZXNzYWdlX19uYW1lXCIpXHJcbiAgICBsZXQgbWVzc2FnZU5hbWVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKVxyXG4gICAgbWVzc2FnZU5hbWVJbnB1dC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIm1lc3NhZ2VfX25hbWVcIilcclxuICAgIG1lc3NhZ2VOYW1lSW5wdXQuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcIm1lc3NhZ2VfX25hbWVcIilcclxuXHJcbiAgICBtZXNzYWdlTmFtZUZpZWxkLmFwcGVuZENoaWxkKG1lc3NhZ2VOYW1lTGFiZWwpXHJcbiAgICBtZXNzYWdlTmFtZUZpZWxkLmFwcGVuZENoaWxkKG1lc3NhZ2VOYW1lSW5wdXQpXHJcblxyXG4gICAgbGV0IG1lc3NhZ2VJbnB1dEZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZpZWxkc2V0XCIpXHJcblxyXG4gICAgbGV0IG1lc3NhZ2VJbnB1dExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpXHJcbiAgICBtZXNzYWdlSW5wdXRMYWJlbC50ZXh0Q29udGVudCA9IFwiWW91ciBNZXNzYWdlIFwiXHJcbiAgICBtZXNzYWdlSW5wdXRMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJtZXNzYWdlX19jb250ZW50XCIpXHJcbiAgICBsZXQgbWVzc2FnZUlucHV0Qm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpXHJcbiAgICBtZXNzYWdlSW5wdXRCb3guc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJtZXNzYWdlX19jb250ZW50XCIpXHJcbiAgICBtZXNzYWdlSW5wdXRCb3guc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcIm1lc3NhZ2VfX2NvbnRlbnRcIilcclxuXHJcbiAgICBtZXNzYWdlSW5wdXRGaWVsZC5hcHBlbmRDaGlsZChtZXNzYWdlSW5wdXRMYWJlbClcclxuICAgIG1lc3NhZ2VJbnB1dEZpZWxkLmFwcGVuZENoaWxkKG1lc3NhZ2VJbnB1dEJveClcclxuXHJcbiAgICBsZXQgbWVzc2FnZURhdGVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiKVxyXG4gICAgXHJcblxyXG4gICAgbGV0IG1lc3NhZ2VEYXRlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIilcclxuICAgIG1lc3NhZ2VEYXRlTGFiZWwudGV4dENvbnRlbnQgPSBcIkRhdGUgXCJcclxuICAgIG1lc3NhZ2VEYXRlTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwibWVzc2FnZV9fZGF0ZVwiKVxyXG4gICAgbGV0IG1lc3NhZ2VEYXRlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIilcclxuICAgIG1lc3NhZ2VEYXRlSW5wdXQuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJkYXRlX19pbnB1dFwiKVxyXG4gICAgbWVzc2FnZURhdGVJbnB1dC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwiZGF0ZV9faW5wdXRcIilcclxuXHJcbiAgICBtZXNzYWdlRGF0ZUZpZWxkLmFwcGVuZENoaWxkKG1lc3NhZ2VEYXRlTGFiZWwpXHJcbiAgICBtZXNzYWdlRGF0ZUZpZWxkLmFwcGVuZENoaWxkKG1lc3NhZ2VEYXRlSW5wdXQpXHJcblxyXG4gICAgbGV0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIilcclxuICAgIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2VuZFwiXHJcbiAgICBzdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJtZXNzYWdlX19zZW5kXCIpXHJcblxyXG4gICAgc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmhhbmRsZUFkZE5ld01lc3NhZ2UpXHJcblxyXG5cclxuICAgIGxldCBtZXNzYWdlRm9ybUZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpXHJcbiAgICBtZXNzYWdlRm9ybUZyYWdtZW50LmFwcGVuZENoaWxkKGZvcm1IZWFkZXIpXHJcbiAgICBtZXNzYWdlRm9ybUZyYWdtZW50LmFwcGVuZENoaWxkKG1lc3NhZ2VOYW1lRmllbGQpXHJcbiAgICBtZXNzYWdlRm9ybUZyYWdtZW50LmFwcGVuZENoaWxkKG1lc3NhZ2VJbnB1dEZpZWxkKVxyXG4gICAgbWVzc2FnZUZvcm1GcmFnbWVudC5hcHBlbmRDaGlsZChtZXNzYWdlRGF0ZUZpZWxkKVxyXG4gICAgbWVzc2FnZUZvcm1GcmFnbWVudC5hcHBlbmRDaGlsZChzdWJtaXRCdXR0b24pXHJcblxyXG5cclxuICAgIGxldCBmb3JtQXJ0aWNsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybU1lc3NhZ2VzXCIpXHJcbiAgICBmb3JtQXJ0aWNsZS5hcHBlbmRDaGlsZChtZXNzYWdlRm9ybUZyYWdtZW50KVxyXG5cclxuICB9LFxyXG4gIFxyXG5cclxuICBoYW5kbGVBZGROZXdNZXNzYWdlKGV2ZW50KSB7XHJcblxyXG4gICAgbGV0IGlucHV0TWVzc2FnZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21lc3NhZ2VfX25hbWVcIikudmFsdWVcclxuICAgIGxldCBpbnB1dE1lc3NhZ2VDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtZXNzYWdlX19jb250ZW50XCIpLnZhbHVlXHJcbiAgICBsZXQgaW5wdXRNZXNzYWdlRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGF0ZV9faW5wdXRcIikudmFsdWVcclxuXHJcblxyXG5cclxuICAgIGxldCBuZXdNZXNzYWdlID0ge1xyXG4gICAgICBTZW5kZXJOYW1lOiBpbnB1dE1lc3NhZ2VOYW1lLFxyXG4gICAgICBNZXNzYWdlOiBpbnB1dE1lc3NhZ2VDb250ZW50LFxyXG4gICAgICBEYXRlOiBpbnB1dE1lc3NhZ2VEYXRlXHJcbiAgICB9XHJcblxyXG4gICAgbWVzc2FnZUNvbGxlY3Rpb24ucG9zdE5ld01lc3NhZ2UobmV3TWVzc2FnZSlcclxuICAgIC8vIC50aGVuKHJlcG9uc2UgPT4ge1xyXG4gICAgbWVzc2FnZUxpc3QuY2hhdGlmeSgpXHJcbiAgICAvLyB9KVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgbWVzc2FnZUZvcm0iLCJpbXBvcnQgbWVzc2FnZUNvbGxlY3Rpb24gZnJvbSBcIi4vbWVzc2FnZUNvbGxlY3Rpb25cIlxyXG5cclxuaW1wb3J0IG1lc3NhZ2UgZnJvbSBcIi4vbWVzc2FnZVwiXHJcblxyXG5jb25zdCBtZXNzYWdlTGlzdCA9IHtcclxuICBjaGF0aWZ5KCkge1xyXG4gICAgbWVzc2FnZUNvbGxlY3Rpb24uZ2V0QWxsbWVzc2FnZXMoKVxyXG4gICAgICAudGhlbihhbGxNZXNzYWdlcyA9PiB7XHJcblxyXG4gICAgICAgIGxldCBtZXNzYWdlRG9jRnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KClcclxuXHJcblxyXG5cclxuICAgICAgICBhbGxNZXNzYWdlcy5mb3JFYWNoKGNoYXQgPT4ge1xyXG4gICAgICAgICAgbGV0IG1lc3NhZ2VIdG1sID0gbWVzc2FnZS5tZXNzYWdlQnVpbGRlcihjaGF0KVxyXG4gICAgICAgICAgbWVzc2FnZURvY0ZyYWdtZW50LmFwcGVuZENoaWxkKG1lc3NhZ2VIdG1sKVxyXG4gICAgICAgIH0pXHJcblxyXG5cclxuICAgICAgICBsZXQgZGlzcGxheUFydGljbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRpc3BsYXlNZXNzYWdlc1wiKVxyXG4gICAgICAgIHdoaWxlIChkaXNwbGF5QXJ0aWNsZS5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICBkaXNwbGF5QXJ0aWNsZS5yZW1vdmVDaGlsZChkaXNwbGF5QXJ0aWNsZS5maXJzdENoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGlzcGxheUFydGljbGUuYXBwZW5kQ2hpbGQobWVzc2FnZURvY0ZyYWdtZW50KVxyXG5cclxuICAgICAgfSlcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG1lc3NhZ2VMaXN0Il19
