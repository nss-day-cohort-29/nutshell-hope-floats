(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _eventsCollection = _interopRequireDefault(require("./eventsCollection"));

var _eventList = _interopRequireDefault(require("./eventList"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const eventEditForm = {
  createAndAppendForm(eventToEdit) {
    let eventNameField = document.createElement("p");
    let eventNameLabels = document.createElement("label");
    eventNameLabels.textContent = "Events";
    let eventNameInput = document.createElement("input");
    eventNameInput.value = eventToEdit.event;
    eventNameField.appendChild(eventNameLabels);
    eventNameField.appendChild(eventNameInput);
    let eventDateField = document.createElement("p");
    let eventDateNameLabel = document.createElement("label");
    eventDateNameLabel.textContent = "Date";
    let eventDateNameInput = document.createElement("input");
    eventDateNameInput.value = eventToEdit.date;
    eventDateField.appendChild(eventDateNameLabel);
    eventDateField.appendChild(eventDateNameInput);
    let eventLocationField = document.createElement("p");
    let eventLocationNameLabel = document.createElement("label");
    eventLocationNameLabel.textContent = "Location";
    let eventLocationNameInput = document.createElement("input");
    eventLocationNameInput.value = eventToEdit.location;
    eventLocationField.appendChild(eventLocationNameLabel);
    eventLocationField.appendChild(eventLocationNameInput);
    let updateButton = document.createElement("button");
    updateButton.textContent = "Update";
    updateButton.addEventListener("click", () => {
      let editedEvents = {
        event: eventNameInput.value,
        date: eventDateNameInput.value,
        location: eventLocationNameInput.value
      };

      _eventsCollection.default.editEvent(eventToEdit.id, editedEvents).then(response => {
        _eventList.default.eventify();

        console.log(response);
        let eventItemArticle = document.querySelector(".displayEditEvents");
        eventItemArticle.innerHTML = "";
      });
    });
    let eventItemArticle = document.querySelector(".displayEditEvents"); // while (eventItemArticle.firstChild) {
    //     eventItemArticle.removeChild(eventItemArticle.firstChild)
    // }

    eventItemArticle.innerHTML = "", eventItemArticle.appendChild(eventNameField);
    eventItemArticle.appendChild(eventDateField);
    eventItemArticle.appendChild(eventLocationField);
    eventItemArticle.appendChild(updateButton);
  }

};
var _default = eventEditForm;
exports.default = _default;

},{"./eventList":3,"./eventsCollection":5}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _eventsCollection = _interopRequireDefault(require("./eventsCollection"));

var _eventList = _interopRequireDefault(require("./eventList"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const eventBuilder = {
  eventBuilding() {
    let contactEventField = document.createElement("fieldset");
    let eventNameLabel = document.createElement("label");
    eventNameLabel.setAttribute("for", "event__name");
    let inputEvent = document.createElement("input");
    inputEvent.setAttribute("id", "eventName");
    inputEvent.placeholder = "Event Name";
    inputEvent.setAttribute("name", "Event-name");
    contactEventField.appendChild(eventNameLabel);
    contactEventField.appendChild(inputEvent);
    let dateField = document.createElement("fieldset");
    let dateLabel = document.createElement("label");
    dateLabel.setAttribute("for", "date");
    let inputDate = document.createElement("input");
    inputDate.setAttribute("id", "eventDate");
    inputDate.placeholder = "Date";
    inputDate.setAttribute("name", "event-Date");
    dateField.appendChild(dateLabel);
    dateField.appendChild(inputDate);
    let locationField = document.createElement("fieldset");
    let locationLabel = document.createElement("label");
    locationLabel.setAttribute("for", "location");
    let inputLocation = document.createElement("input");
    inputLocation.setAttribute("id", "eventLocation");
    inputLocation.placeholder = "Location";
    inputLocation.setAttribute("name", "event-location");
    locationField.appendChild(locationLabel);
    locationField.appendChild(inputLocation);
    let submitButton = document.createElement("button");
    submitButton.textContent = "Add Event";
    submitButton.setAttribute("class", "event-save");
    submitButton.addEventListener("click", this.handleAddNewEvent);
    let eventFormFragment = document.createDocumentFragment();
    eventFormFragment.appendChild(contactEventField);
    eventFormFragment.appendChild(dateField);
    eventFormFragment.appendChild(locationField);
    eventFormFragment.appendChild(submitButton);
    let formArticle = document.querySelector(".formEvents");
    formArticle.appendChild(eventFormFragment);
    return inputEvent;
  },

  handleAddNewEvent() {
    let inputEventName = document.querySelector("#eventName").value;
    let inputEventDate = document.querySelector("#eventDate").value;
    let inputEventLocation = document.querySelector("#eventLocation").value;
    console.log(inputEventLocation);
    let newEvent = {
      event: inputEventName,
      date: inputEventDate,
      location: inputEventLocation
    };

    _eventsCollection.default.postAllEvents(newEvent).then(response => {
      _eventList.default.eventify();

      console.log(response);
    });
  }

};
var _default = eventBuilder;
exports.default = _default;

},{"./eventList":3,"./eventsCollection":5}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _eventsCollection = _interopRequireDefault(require("./eventsCollection"));

var _events = _interopRequireDefault(require("./events"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const eventList = {
  eventify() {
    _eventsCollection.default.getAllEvents().then(allEvents => {
      let eventDocFragment = document.createDocumentFragment();
      allEvents.forEach(eventItem => {
        let eventHTML = _events.default.eventBuilder(eventItem);

        eventDocFragment.appendChild(eventHTML);
      });
      let outputArticle = document.querySelector(".displayEvents");

      while (outputArticle.firstChild) {
        outputArticle.removeChild(outputArticle.firstChild);
      }

      outputArticle.appendChild(eventDocFragment);
    });
  }

};
var _default = eventList;
exports.default = _default;

},{"./events":4,"./eventsCollection":5}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _eventsCollection = _interopRequireDefault(require("./eventsCollection"));

var _eventList = _interopRequireDefault(require("./eventList"));

var _editForm = _interopRequireDefault(require("./editForm"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const createEvent = {
  eventBuilder(eventObject) {
    let eventArticle = document.createElement("article");
    let horizontalLine = document.createElement("hr");
    let eventName = document.createElement("h3");
    eventName.textContent = eventObject.event;
    let eventDate = document.createElement("section");
    eventDate.textContent = eventObject.date;
    let eventLocation = document.createElement("section");
    eventLocation.textContent = eventObject.location;
    let editButton = document.createElement("button");
    editButton.textContent = "Edit Event";
    editButton.setAttribute("id", `editEvent--${eventObject.id}`);
    editButton.addEventListener("click", () => {
      let articleID = event.target.id;
      console.log(articleID);
      let eventId = articleID.split("--")[1];
      console.log(eventId);

      _eventsCollection.default.getEvent(eventId).then(response => {
        _editForm.default.createAndAppendForm(response);
      });
    });
    let deleteButton = document.createElement("button");
    deleteButton.textContent = "Delete Event";
    deleteButton.setAttribute("id", `deleteEvent--${eventObject.id}`);
    deleteButton.addEventListener("click", () => {
      console.log(event);
      let eventId = event.target.id.split("--")[1];

      _eventsCollection.default.deleteEvents(eventId).then(response => {
        _eventList.default.eventify();

        console.log(response);
      });
    });
    eventArticle.appendChild(eventName);
    eventArticle.appendChild(eventDate);
    eventArticle.appendChild(eventLocation);
    eventArticle.appendChild(deleteButton);
    eventArticle.appendChild(editButton);
    eventArticle.appendChild(horizontalLine);
    return eventArticle;
  }

};
var _default = createEvent;
exports.default = _default;

},{"./editForm":1,"./eventList":3,"./eventsCollection":5}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
const eventsCollection = {
  getAllEvents() {
    return fetch("http://localhost:8088/Events").then(response => response.json());
  },

  postAllEvents(newEventToSave) {
    return fetch("http://localhost:8088/Events", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(newEventToSave)
    }); // location.reload(true);
  },

  deleteEvents(eventId) {
    return fetch(`http://localhost:8088/Events/${eventId}`, {
      method: "DELETE",
      headers: {
        "Content-Type": "application/json"
      }
    });
  },

  getEvent(eventId) {
    return fetch(`http://localhost:8088/Events/${eventId}`).then(response => response.json());
  },

  editEvent(eventId, eventToEdit) {
    return fetch(`http://localhost:8088/Events/${eventId}`, {
      method: "PUT",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(eventToEdit)
    });
  }

};
var _default = eventsCollection;
exports.default = _default;

},{}],6:[function(require,module,exports){
"use strict";

var _eventList = _interopRequireDefault(require("./eventList"));

var _eventBuilder = _interopRequireDefault(require("./eventBuilder"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_eventList.default.eventify();

_eventBuilder.default.eventBuilding();

},{"./eventBuilder":2,"./eventList":3}]},{},[6])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi9zY3JpcHRzL2VkaXRGb3JtLmpzIiwiLi4vc2NyaXB0cy9ldmVudEJ1aWxkZXIuanMiLCIuLi9zY3JpcHRzL2V2ZW50TGlzdC5qcyIsIi4uL3NjcmlwdHMvZXZlbnRzLmpzIiwiLi4vc2NyaXB0cy9ldmVudHNDb2xsZWN0aW9uLmpzIiwiLi4vc2NyaXB0cy9tYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7OztBQ0FBOztBQUNBOzs7O0FBRUEsTUFBTSxhQUFhLEdBQUc7QUFDbEIsRUFBQSxtQkFBbUIsQ0FBRSxXQUFGLEVBQWU7QUFDOUIsUUFBSSxjQUFjLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsR0FBdkIsQ0FBckI7QUFDQSxRQUFJLGVBQWUsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixPQUF2QixDQUF0QjtBQUNBLElBQUEsZUFBZSxDQUFDLFdBQWhCLEdBQThCLFFBQTlCO0FBQ0EsUUFBSSxjQUFjLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsT0FBdkIsQ0FBckI7QUFDQSxJQUFBLGNBQWMsQ0FBQyxLQUFmLEdBQXVCLFdBQVcsQ0FBQyxLQUFuQztBQUVBLElBQUEsY0FBYyxDQUFDLFdBQWYsQ0FBMkIsZUFBM0I7QUFDQSxJQUFBLGNBQWMsQ0FBQyxXQUFmLENBQTJCLGNBQTNCO0FBRUEsUUFBSSxjQUFjLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsR0FBdkIsQ0FBckI7QUFDQSxRQUFJLGtCQUFrQixHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLE9BQXZCLENBQXpCO0FBQ0EsSUFBQSxrQkFBa0IsQ0FBQyxXQUFuQixHQUFpQyxNQUFqQztBQUNBLFFBQUksa0JBQWtCLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsT0FBdkIsQ0FBekI7QUFDQSxJQUFBLGtCQUFrQixDQUFDLEtBQW5CLEdBQTJCLFdBQVcsQ0FBQyxJQUF2QztBQUVB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QyxLQUE1QyxDQUFaO0FBTUYsR0F2QnVCOztBQXlCckIsRUFBQSxRQUFRLENBQUMsT0FBRCxFQUFTO0FBQ2IsV0FBTyxLQUFLLENBQUUsZ0NBQStCLE9BQVEsRUFBekMsQ0FBTCxDQUNOLElBRE0sQ0FDRCxRQUFRLElBQUksUUFBUSxDQUFDLElBQVQsRUFEWCxDQUFQO0FBRUgsR0E1Qm9COztBQTZCckIsRUFBQSxTQUFTLENBQUMsT0FBRCxFQUFVLFdBQVYsRUFBdUI7QUFDNUIsV0FBTyxLQUFLLENBQUUsZ0NBQStCLE9BQVEsRUFBekMsRUFBNEM7QUFDcEQsTUFBQSxNQUFNLEVBQUUsS0FENEM7QUFFcEQsTUFBQSxPQUFPLEVBQUU7QUFDVCx3QkFBZ0I7QUFEUCxPQUYyQztBQUs1RCxNQUFBLElBQUksRUFBRSxJQUFJLENBQUMsU0FBTCxDQUFlLFdBQWY7QUFMc0QsS0FBNUMsQ0FBWjtBQU9QOztBQXJDd0IsQ0FBekI7ZUF3Q2UsZ0I7Ozs7OztBQ3hDZjs7QUFDQTs7OztBQUVBLG1CQUFVLFFBQVY7O0FBQ0Esc0JBQWEsYUFBYiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCBldmVudHNDb2xsZWN0aW9uIGZyb20gXCIuL2V2ZW50c0NvbGxlY3Rpb25cIlxuaW1wb3J0IGV2ZW50TGlzdCBmcm9tIFwiLi9ldmVudExpc3RcIlxuXG5jb25zdCBldmVudEVkaXRGb3JtID0ge1xuICAgIGNyZWF0ZUFuZEFwcGVuZEZvcm0gKGV2ZW50VG9FZGl0KSB7XG4gICAgICAgIGxldCBldmVudE5hbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXG4gICAgICAgIGxldCBldmVudE5hbWVMYWJlbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIilcbiAgICAgICAgZXZlbnROYW1lTGFiZWxzLnRleHRDb250ZW50ID0gXCJFdmVudHNcIlxuICAgICAgICBsZXQgZXZlbnROYW1lSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIilcbiAgICAgICAgZXZlbnROYW1lSW5wdXQudmFsdWUgPSBldmVudFRvRWRpdC5ldmVudFxuXG4gICAgICAgIGV2ZW50TmFtZUZpZWxkLmFwcGVuZENoaWxkKGV2ZW50TmFtZUxhYmVscylcbiAgICAgICAgZXZlbnROYW1lRmllbGQuYXBwZW5kQ2hpbGQoZXZlbnROYW1lSW5wdXQpXG5cbiAgICAgICAgbGV0IGV2ZW50RGF0ZUZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIilcbiAgICAgICAgbGV0IGV2ZW50RGF0ZU5hbWVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKVxuICAgICAgICBldmVudERhdGVOYW1lTGFiZWwudGV4dENvbnRlbnQgPSBcIkRhdGVcIlxuICAgICAgICBsZXQgZXZlbnREYXRlTmFtZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpXG4gICAgICAgIGV2ZW50RGF0ZU5hbWVJbnB1dC52YWx1ZSA9IGV2ZW50VG9FZGl0LmRhdGVcblxuICAgICAgICBldmVudERhdGVGaWVsZC5hcHBlbmRDaGlsZChldmVudERhdGVOYW1lTGFiZWwpXG4gICAgICAgIGV2ZW50RGF0ZUZpZWxkLmFwcGVuZENoaWxkKGV2ZW50RGF0ZU5hbWVJbnB1dClcblxuICAgICAgICBsZXQgZXZlbnRMb2NhdGlvbkZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIilcbiAgICAgICAgbGV0IGV2ZW50TG9jYXRpb25OYW1lTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIilcbiAgICAgICAgZXZlbnRMb2NhdGlvbk5hbWVMYWJlbC50ZXh0Q29udGVudCA9IFwiTG9jYXRpb25cIlxuICAgICAgICBsZXQgZXZlbnRMb2NhdGlvbk5hbWVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKVxuICAgICAgICBldmVudExvY2F0aW9uTmFtZUlucHV0LnZhbHVlID0gZXZlbnRUb0VkaXQubG9jYXRpb25cblxuICAgICAgICBldmVudExvY2F0aW9uRmllbGQuYXBwZW5kQ2hpbGQoZXZlbnRMb2NhdGlvbk5hbWVMYWJlbClcbiAgICAgICAgZXZlbnRMb2NhdGlvbkZpZWxkLmFwcGVuZENoaWxkKGV2ZW50TG9jYXRpb25OYW1lSW5wdXQpXG5cbiAgICAgICAgbGV0IHVwZGF0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIilcbiAgICAgICAgdXBkYXRlQnV0dG9uLnRleHRDb250ZW50ID0gXCJVcGRhdGVcIlxuXG4gICAgICAgIHVwZGF0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgbGV0IGVkaXRlZEV2ZW50cyA9IHtcbiAgICAgICAgICAgICAgICBldmVudDogZXZlbnROYW1lSW5wdXQudmFsdWUsXG4gICAgICAgICAgICAgICAgZGF0ZTogZXZlbnREYXRlTmFtZUlucHV0LnZhbHVlLFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBldmVudExvY2F0aW9uTmFtZUlucHV0LnZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBldmVudHNDb2xsZWN0aW9uLmVkaXRFdmVudChldmVudFRvRWRpdC5pZCwgZWRpdGVkRXZlbnRzKVxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgIGV2ZW50TGlzdC5ldmVudGlmeSgpXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpXG5cbiAgICAgICAgICAgICAgICBsZXQgZXZlbnRJdGVtQXJ0aWNsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGlzcGxheUVkaXRFdmVudHNcIilcbiAgICAgICAgICAgICAgICBldmVudEl0ZW1BcnRpY2xlLmlubmVySFRNTCA9IFwiXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgIGxldCBldmVudEl0ZW1BcnRpY2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kaXNwbGF5RWRpdEV2ZW50c1wiKVxuXG4gICAgICAgIC8vIHdoaWxlIChldmVudEl0ZW1BcnRpY2xlLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgLy8gICAgIGV2ZW50SXRlbUFydGljbGUucmVtb3ZlQ2hpbGQoZXZlbnRJdGVtQXJ0aWNsZS5maXJzdENoaWxkKVxuICAgICAgICAvLyB9XG5cbiAgICAgICAgZXZlbnRJdGVtQXJ0aWNsZS5pbm5lckhUTUwgPSBcIlwiLFxuICAgICAgICBldmVudEl0ZW1BcnRpY2xlLmFwcGVuZENoaWxkKGV2ZW50TmFtZUZpZWxkKVxuICAgICAgICBldmVudEl0ZW1BcnRpY2xlLmFwcGVuZENoaWxkKGV2ZW50RGF0ZUZpZWxkKVxuICAgICAgICBldmVudEl0ZW1BcnRpY2xlLmFwcGVuZENoaWxkKGV2ZW50TG9jYXRpb25GaWVsZClcbiAgICAgICAgZXZlbnRJdGVtQXJ0aWNsZS5hcHBlbmRDaGlsZCh1cGRhdGVCdXR0b24pXG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgZXZlbnRFZGl0Rm9ybVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIiwiaW1wb3J0IGV2ZW50c0NvbGxlY3Rpb24gZnJvbSBcIi4vZXZlbnRzQ29sbGVjdGlvblwiXG5pbXBvcnQgZXZlbnRMaXN0IGZyb20gXCIuL2V2ZW50TGlzdFwiO1xuXG5jb25zdCBldmVudEJ1aWxkZXIgPSB7XG4gICAgZXZlbnRCdWlsZGluZygpe1xuXG4gICAgICAgIGxldCBjb250YWN0RXZlbnRGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiKVxuXG4gICAgICAgIGxldCBldmVudE5hbWVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKVxuICAgICAgICBldmVudE5hbWVMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJldmVudF9fbmFtZVwiKVxuICAgICAgICBsZXQgaW5wdXRFdmVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgaW5wdXRFdmVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImV2ZW50TmFtZVwiKVxuICAgICAgICBpbnB1dEV2ZW50LnBsYWNlaG9sZGVyPSBcIkV2ZW50IE5hbWVcIlxuICAgICAgICBpbnB1dEV2ZW50LnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJFdmVudC1uYW1lXCIpXG5cblxuICAgICAgICBjb250YWN0RXZlbnRGaWVsZC5hcHBlbmRDaGlsZChldmVudE5hbWVMYWJlbClcbiAgICAgICAgY29udGFjdEV2ZW50RmllbGQuYXBwZW5kQ2hpbGQoaW5wdXRFdmVudClcblxuICAgICAgICBsZXQgZGF0ZUZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZpZWxkc2V0XCIpXG5cbiAgICAgICAgbGV0IGRhdGVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKVxuICAgICAgICBkYXRlTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwiZGF0ZVwiKVxuICAgICAgICBsZXQgaW5wdXREYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpXG4gICAgICAgIGlucHV0RGF0ZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImV2ZW50RGF0ZVwiKVxuICAgICAgICBpbnB1dERhdGUucGxhY2Vob2xkZXI9IFwiRGF0ZVwiXG4gICAgICAgIGlucHV0RGF0ZS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwiZXZlbnQtRGF0ZVwiKVxuXG4gICAgICAgIGRhdGVGaWVsZC5hcHBlbmRDaGlsZChkYXRlTGFiZWwpXG4gICAgICAgIGRhdGVGaWVsZC5hcHBlbmRDaGlsZChpbnB1dERhdGUpXG5cbiAgICAgICAgbGV0IGxvY2F0aW9uRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZmllbGRzZXRcIilcblxuICAgICAgICBsZXQgbG9jYXRpb25MYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKVxuICAgICAgICBsb2NhdGlvbkxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcImxvY2F0aW9uXCIpXG4gICAgICAgIGxldCBpbnB1dExvY2F0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpXG4gICAgICAgIGlucHV0TG9jYXRpb24uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJldmVudExvY2F0aW9uXCIpXG4gICAgICAgIGlucHV0TG9jYXRpb24ucGxhY2Vob2xkZXI9IFwiTG9jYXRpb25cIlxuICAgICAgICBpbnB1dExvY2F0aW9uLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJldmVudC1sb2NhdGlvblwiKVxuXG4gICAgICAgIGxvY2F0aW9uRmllbGQuYXBwZW5kQ2hpbGQobG9jYXRpb25MYWJlbClcbiAgICAgICAgbG9jYXRpb25GaWVsZC5hcHBlbmRDaGlsZChpbnB1dExvY2F0aW9uKVxuXG4gICAgICAgIGxldCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQWRkIEV2ZW50XCJcbiAgICAgICAgc3VibWl0QnV0dG9uLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZXZlbnQtc2F2ZVwiKVxuXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVBZGROZXdFdmVudClcblxuICAgICAgICBsZXQgZXZlbnRGb3JtRnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KClcbiAgICAgICAgZXZlbnRGb3JtRnJhZ21lbnQuYXBwZW5kQ2hpbGQoY29udGFjdEV2ZW50RmllbGQpXG4gICAgICAgIGV2ZW50Rm9ybUZyYWdtZW50LmFwcGVuZENoaWxkKGRhdGVGaWVsZClcbiAgICAgICAgZXZlbnRGb3JtRnJhZ21lbnQuYXBwZW5kQ2hpbGQobG9jYXRpb25GaWVsZClcbiAgICAgICAgZXZlbnRGb3JtRnJhZ21lbnQuYXBwZW5kQ2hpbGQoc3VibWl0QnV0dG9uKVxuXG4gICAgICAgIGxldCBmb3JtQXJ0aWNsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybUV2ZW50c1wiKVxuICAgICAgICBmb3JtQXJ0aWNsZS5hcHBlbmRDaGlsZChldmVudEZvcm1GcmFnbWVudClcbiAgICAgICAgcmV0dXJuIGlucHV0RXZlbnRcbiAgICB9LFxuICAgIGhhbmRsZUFkZE5ld0V2ZW50ICgpIHtcbiAgICAgICAgbGV0IGlucHV0RXZlbnROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNldmVudE5hbWVcIikudmFsdWVcbiAgICAgICAgbGV0IGlucHV0RXZlbnREYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNldmVudERhdGVcIikudmFsdWVcbiAgICAgICAgbGV0IGlucHV0RXZlbnRMb2NhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZXZlbnRMb2NhdGlvblwiKS52YWx1ZVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGlucHV0RXZlbnRMb2NhdGlvbilcblxuICAgICAgICBsZXQgbmV3RXZlbnQgPSB7XG4gICAgICAgICAgICBldmVudDogaW5wdXRFdmVudE5hbWUsXG4gICAgICAgICAgICBkYXRlOiBpbnB1dEV2ZW50RGF0ZSxcbiAgICAgICAgICAgIGxvY2F0aW9uOiBpbnB1dEV2ZW50TG9jYXRpb25cbiAgICAgICAgfVxuICAgICAgICBldmVudHNDb2xsZWN0aW9uLnBvc3RBbGxFdmVudHMobmV3RXZlbnQpXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICBldmVudExpc3QuZXZlbnRpZnkoKVxuICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSlcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGV2ZW50QnVpbGRlciIsImltcG9ydCBldmVudHNDb2xsZWN0aW9uIGZyb20gXCIuL2V2ZW50c0NvbGxlY3Rpb25cIlxuaW1wb3J0IGNyZWF0ZUV2ZW50IGZyb20gXCIuL2V2ZW50c1wiXG5cbmNvbnN0IGV2ZW50TGlzdCA9IHtcbiAgICBldmVudGlmeSgpe1xuICAgICAgICBldmVudHNDb2xsZWN0aW9uLmdldEFsbEV2ZW50cygpXG4gICAgICAgIC50aGVuKGFsbEV2ZW50cyA9PntcbiAgICAgICAgICAgIGxldCBldmVudERvY0ZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpXG4gICAgICAgICAgICBhbGxFdmVudHMuZm9yRWFjaChldmVudEl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgIGxldCBldmVudEhUTUwgPSBjcmVhdGVFdmVudC5ldmVudEJ1aWxkZXIoZXZlbnRJdGVtKVxuICAgICAgICAgICAgICAgIGV2ZW50RG9jRnJhZ21lbnQuYXBwZW5kQ2hpbGQoZXZlbnRIVE1MKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgb3V0cHV0QXJ0aWNsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGlzcGxheUV2ZW50c1wiKVxuICAgICAgICAgICAgd2hpbGUgKG91dHB1dEFydGljbGUuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgIG91dHB1dEFydGljbGUucmVtb3ZlQ2hpbGQob3V0cHV0QXJ0aWNsZS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG91dHB1dEFydGljbGUuYXBwZW5kQ2hpbGQoZXZlbnREb2NGcmFnbWVudClcblxuICAgICAgICB9KVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZXZlbnRMaXN0IiwiaW1wb3J0IGV2ZW50c0NvbGxlY3Rpb24gZnJvbSBcIi4vZXZlbnRzQ29sbGVjdGlvblwiO1xuaW1wb3J0IGV2ZW50TGlzdCBmcm9tIFwiLi9ldmVudExpc3RcIjtcbmltcG9ydCBldmVudEVkaXRGb3JtIGZyb20gXCIuL2VkaXRGb3JtXCI7XG5cbmNvbnN0IGNyZWF0ZUV2ZW50ID0ge1xuICAgIGV2ZW50QnVpbGRlcihldmVudE9iamVjdCl7XG4gICAgICAgIGxldCBldmVudEFydGljbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXJ0aWNsZVwiKTtcblxuICAgICAgICBsZXQgaG9yaXpvbnRhbExpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHJcIik7XG5cbiAgICAgICAgbGV0IGV2ZW50TmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKVxuICAgICAgICBldmVudE5hbWUudGV4dENvbnRlbnQgPSBldmVudE9iamVjdC5ldmVudDtcblxuICAgICAgICBsZXQgZXZlbnREYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlY3Rpb25cIilcbiAgICAgICAgZXZlbnREYXRlLnRleHRDb250ZW50ID0gZXZlbnRPYmplY3QuZGF0ZTtcblxuICAgICAgICBsZXQgZXZlbnRMb2NhdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWN0aW9uXCIpXG4gICAgICAgIGV2ZW50TG9jYXRpb24udGV4dENvbnRlbnQgPSBldmVudE9iamVjdC5sb2NhdGlvblxuXG4gICAgICAgIGxldCBlZGl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKVxuICAgICAgICBlZGl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJFZGl0IEV2ZW50XCJcbiAgICAgICAgZWRpdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBgZWRpdEV2ZW50LS0ke2V2ZW50T2JqZWN0LmlkfWApXG4gICAgICAgIGVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgbGV0IGFydGljbGVJRCA9IGV2ZW50LnRhcmdldC5pZFxuICAgICAgICBjb25zb2xlLmxvZyhhcnRpY2xlSUQpXG4gICAgICAgIGxldCBldmVudElkID0gYXJ0aWNsZUlELnNwbGl0KFwiLS1cIilbMV1cbiAgICAgICAgY29uc29sZS5sb2coZXZlbnRJZClcbiAgICBldmVudHNDb2xsZWN0aW9uLmdldEV2ZW50KGV2ZW50SWQpXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICBldmVudEVkaXRGb3JtLmNyZWF0ZUFuZEFwcGVuZEZvcm0ocmVzcG9uc2UpXG4gICAgICAgIH0pXG4gICAgfSlcblxuICAgICAgICBsZXQgZGVsZXRlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKVxuICAgICAgICBkZWxldGVCdXR0b24udGV4dENvbnRlbnQgPSBcIkRlbGV0ZSBFdmVudFwiXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBgZGVsZXRlRXZlbnQtLSR7ZXZlbnRPYmplY3QuaWR9YClcbiAgICAgICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhldmVudClcbiAgICAgICAgICAgIGxldCBldmVudElkID0gZXZlbnQudGFyZ2V0LmlkLnNwbGl0KFwiLS1cIilbMV1cbiAgICBldmVudHNDb2xsZWN0aW9uLmRlbGV0ZUV2ZW50cyhldmVudElkKVxuICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgZXZlbnRMaXN0LmV2ZW50aWZ5KClcbiAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpXG4gICAgICAgIH0pXG4gICAgfSlcblxuICAgICAgICBldmVudEFydGljbGUuYXBwZW5kQ2hpbGQoZXZlbnROYW1lKVxuICAgICAgICBldmVudEFydGljbGUuYXBwZW5kQ2hpbGQoZXZlbnREYXRlKVxuICAgICAgICBldmVudEFydGljbGUuYXBwZW5kQ2hpbGQoZXZlbnRMb2NhdGlvbilcbiAgICAgICAgZXZlbnRBcnRpY2xlLmFwcGVuZENoaWxkKGRlbGV0ZUJ1dHRvbilcbiAgICAgICAgZXZlbnRBcnRpY2xlLmFwcGVuZENoaWxkKGVkaXRCdXR0b24pXG4gICAgICAgIGV2ZW50QXJ0aWNsZS5hcHBlbmRDaGlsZChob3Jpem9udGFsTGluZSlcblxuICAgICAgICByZXR1cm4gZXZlbnRBcnRpY2xlXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVFdmVudCIsImNvbnN0IGV2ZW50c0NvbGxlY3Rpb24gPSB7XG5cbiAgICBnZXRBbGxFdmVudHMgKCl7XG4gICAgICAgIHJldHVybiBmZXRjaChcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9FdmVudHNcIilcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgIH0sXG4gICAgcG9zdEFsbEV2ZW50cyhuZXdFdmVudFRvU2F2ZSl7XG4gICAgICAgcmV0dXJuIGZldGNoKFwiaHR0cDovL2xvY2FsaG9zdDo4MDg4L0V2ZW50c1wiLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkobmV3RXZlbnRUb1NhdmUpXG4gICAgfSlcbiAgICAvLyBsb2NhdGlvbi5yZWxvYWQodHJ1ZSk7XG4gIH0sXG4gIGRlbGV0ZUV2ZW50cyhldmVudElkKXtcbiAgICByZXR1cm4gZmV0Y2goYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9FdmVudHMvJHtldmVudElkfWAsIHtcbiAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICBoZWFkZXJzOiB7XG4gICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgIH1cbiAgfSlcbiB9LFxuXG4gICAgZ2V0RXZlbnQoZXZlbnRJZCl7XG4gICAgICAgIHJldHVybiBmZXRjaChgaHR0cDovL2xvY2FsaG9zdDo4MDg4L0V2ZW50cy8ke2V2ZW50SWR9YClcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgIH0sXG4gICAgZWRpdEV2ZW50KGV2ZW50SWQsIGV2ZW50VG9FZGl0KSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgaHR0cDovL2xvY2FsaG9zdDo4MDg4L0V2ZW50cy8ke2V2ZW50SWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGV2ZW50VG9FZGl0KVxuICB9KVxufVxufVxuXG5leHBvcnQgZGVmYXVsdCBldmVudHNDb2xsZWN0aW9uIiwiaW1wb3J0IGV2ZW50TGlzdCBmcm9tIFwiLi9ldmVudExpc3RcIlxuaW1wb3J0IGV2ZW50QnVpbGRlciBmcm9tIFwiLi9ldmVudEJ1aWxkZXJcIlxuXG5ldmVudExpc3QuZXZlbnRpZnkoKVxuZXZlbnRCdWlsZGVyLmV2ZW50QnVpbGRpbmcoKSJdfQ==
